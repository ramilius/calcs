<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>$page_name</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/index.css" />
        <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    </head>
    
    <body>
        <div class="wrapper">
            <header>
                <div class='header_top_row row'>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-chevron-left'></i>
                    </div>
                    <div class='col-xs-20 text-center'>Определение адекватности гемодиализа</div>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-floppy-save'></i>
                    </div>
                </div>
                <div class='header_botttom_row'>
                    <ul>
                        <li class='active'>Рассчет</li>
                        <li>Информация</li>
                    </ul>
                </div>
            </header>
            
            <main>
				<script>
					function calculation() {
					var 
					id1 = Number(document.getElementById('id1').value),
					id2 = Number(document.getElementById('id2').value),
					id3 = Number(document.getElementById('id3').value),
					id4 = Number(document.getElementById('id4').value),
					id5 = Number(document.getElementById('id5').value),
					id6 = Number(document.getElementById('id6').value),
					
					text,
					text2,
					text3,
					result,
					result1,
					result2,
					result3;
						
					/* spKt/V = - ln(Ct/Co - 0,008 × t) + (4 - 3,5 × Ct/Co) × dBW/BW */
					result1 = -Math.log((id3/id2) - (0.008*id5)) + (4 - 3.5 * (id3/id2))*(id4/id6);
						
					if(id1 == 0){
						result2 = result1 - (0.47 * result1/id5) + 0.02;
					}
					else if(id1 == 1){
						result2 = result1 - (0.6 * result1/id5) + 0.03;
					}
					
					result3 = 100*(1 - id3/id2);
						
					if(result2 < 1.2){
						text2 = 'Недостаточная доля диализа.';
					}
					else if((result2 >= 1.2)&&(result2 < 1.59)){
						text2 = 'Адекватный диализ.';
					}
					else if((result2 >= 1.6)&&(result2 < 2.29)){
					 	text2 = 'Оптимальный диализ.';
					}
					else if(result2 >= 2.3){
						text2 = 'Идеальный диализ.';
					}
					
					if(result3 >= 65){
						test3 = 'Достаточный процент снижения мочевины';
					}
					else if(result3 < 65){
						test3 = 'Недостаточный процент снижения мочевины';
					}
					
					result1 = result1.toFixed(2);
					result2 = result2.toFixed(2);
					result3 = result3.toFixed(2);
													
					document.getElementById('result-score').innerHTML = 'eKt/v: ' + result2 + ' spKt/v: ' + result1 + ' Доля снижения мочевины: ' + result3 + '%';
					document.getElementById('result-text').innerHTML  = text2 + test3;
					
					}
					
					function reset() {
					document.getElementById('result-score').innerHTML  = 'Результат';
					document.getElementById('result-text').innerHTML  = 'Оценка';
					document.getElementById('id1').value=0;
					document.getElementById('id2').value='';
					document.getElementById('id3').value='';
					document.getElementById('id4').value='';
					document.getElementById('id5').value='';
					document.getElementById('id6').value='';
					}
					
				</script>
  
				<div class='select_wrapper'>
                    <label for='select_1'>Доступ</label>
                    <select name='select_1' id='id1'>
                        <option value='0'>Веновенозный</option>
                        <option value='1'>Артериовенозный</option>
                    </select>
                </div>		
             	<div class='input_wrapper'>
                    <label for='id2'>Мочевина до диализа, ммоль/л</label>
                    <input name="id2" id="id2" min="0" type="number" value="" />
                </div>                
                <div class='input_wrapper'>
                    <label for='id3'>Мочевина после диализа, ммоль/л</label>
                    <input name="id3" id="id3" min="0" type="number" value="" />
                </div>
				<div class='input_wrapper'>
                    <label for='id4'>Потеря веса в ходе диализа, кг</label>
                    <input name="id4" id="id4" min="0" type="number" value="" />
                </div>                
                <div class='input_wrapper'>
                    <label for='id5'>Время диализа, часов</label>
                    <input name="id5" id="id5" min="0" type="number" value="" />
                </div>
				<div class='input_wrapper'>
                    <label for='id6'>Вес пациента после диализа, кг</label>
                    <input name="id6" id="id6" min="0" type="number" value="" />
                </div>
            </main>
        </div>
        <footer class='text-center'>
            <div class='result_title' id='result-score'>Результат</div>
            <div class='result' id='result-text'>???</div>
            <div class='row button_row'>
                <div class='col-xs-12 button_wrapper'>
                    <button class='clear_button' onclick='reset()'>Сбросить</button>
                </div>
                <div class='col-xs-12 button_wrapper'>
                    <button class='result_button' onclick='calculation()'>Рассчитать</button>
                </div>
            </div>
        </footer>
    </body>
</html>
