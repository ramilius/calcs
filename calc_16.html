<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>$page_name</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/index.css" />
        <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    </head>
    
    <body>
        <div class="wrapper">
            <header>
                <div class='header_top_row row'>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-chevron-left'></i>
                    </div>
                    <div class='col-xs-20 text-center'>Расчет концентрации кальция с поправкой на содержание альбумина.</div>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-floppy-save'></i>
                    </div>
                </div>
                <div class='header_botttom_row'>
                    <ul>
                        <li class='active'>Рассчет</li>
                        <li>Информация</li>
                    </ul>
                </div>
            </header>
            
            <main>
			
				<script>

					function calculation() {
					var 
						 
					id1 = Number(document.getElementById('id1').value),
					id2 = Number(document.getElementById('id2').value),
					id3 = Number(document.getElementById('id3').value),
					id4 = Number(document.getElementById('id4').value),
					
					text,
					result1,
					result2,
					result = 0;
					
					if((id1 < 5)||(id1 > 12)){
						if(id2 == 0){
							text = 'Уровень кальция должен быть в пределах от 5 до 12 мг/дл.';
						}
						else{
							if((id1 < 1.25)||(id1 > 3)){
								text = 'Уровень кальция должен быть в пределах от 1.25 до 3 ммоль/л.';
							}
							else{
								text = 'ммоль/л';
								result1 = id1;
							}
						}
					}
					else{
						if(id2 == 0){
							text = 'мг/дл';
							result1 = id1;
						}
						else{
							text = 'Уровень кальция должен быть в пределах от 1.25 до 3 ммоль/л.';
						}					
					}
					
					if((id3 < 1)||(id3 > 5.5)){
						if(id4 == 0){
							text = 'Уровень альбумина должен быть в пределах от 1 до 5.5 г/дл.';
						}
						else{
							if((id3 < 10)||(id3 > 55)){
								text = 'Уровень альбумина должен быть в пределах от 10 до 55 г/л.';
							}
							else{
								result2 = id3;
							}
						}
					}
					else{
						if(id4 == 0){
							result2 = id3;
						}
						else{
							text = 'Уровень альбумина должен быть в пределах от 10 до 55 г/л.';
						}	
					}
					
					if((id2 == 0)&&(id4 == 0)){
						result = result1 + 0.8 * (4 - result2);
					}
					else if((id2 == 1)&&(id4 == 1)){
						result = result1 + 0.02 * (40 - result2);
					}
					else{
						//при выборе разных размерностей для id1 и id3 разные кальляторы дают разные результаты,
						//не ясно по какой формуле идет вычисление,
						//в данном случае в качестве результата возращаем 0.
						result = 0;
					}
									
					document.getElementById('result-score').innerHTML = result.toFixed(2);
					document.getElementById('result-text').innerHTML  = text;
					}
					
					function reset() {
					document.getElementById('result-score').innerHTML  = 'Результат';
					document.getElementById('result-text').innerHTML  = 'Размерность';
					document.getElementById('id1').value='';
					document.getElementById('id2').value=0;
					document.getElementById('id3').value='';
					document.getElementById('id4').value=0;
					}
					
				</script>
					
				<!-- для того чтобы поместить input_wrapper и select_wrapper на одну строку похоже надо корректировать css файл -->
				<div class='input_wrapper'>
					<label for='id1'>Измеренный уровень кальция плазмы: </label>
					<input name="id1" id="id1" min="0" type="number" value="" style="width: 250px;" />	
				</div>	
		        <div class='select_wrapper'>
					<select name='select_1' id='id2' >
						<option value='0'>мг/дл</option>
						<option value='1'>ммоль/л</option>
					</select>
				</div>
				<div class='input_wrapper'>
					<label for='id3'>Измеренный уровень альбумина плазмы: </label>
					<input name="id3" id="id3" min="0" type="number" value="" style="width: 250px;" />	
				</div>	
		        <div class='select_wrapper'>
					<select name='select_2' id='id4' >
						<option value='0'>г/дл</option>
						<option value='1'>г/л</option>
					</select>
				</div>
            </main>
        </div>
        <footer class='text-center'>
            <div class='result_title' id='result-score'>Результат</div>
            <div class='result' id='result-text'>Размерность</div>
            <div class='row button_row'>
                <div class='col-xs-12 button_wrapper'>
                    <button class='clear_button' onclick='reset()'>Сбросить</button>
                </div>
                <div class='col-xs-12 button_wrapper'>
                    <button class='result_button' onclick='calculation()'>Рассчитать</button>
                </div>
            </div>
        </footer>
    </body>
</html>
