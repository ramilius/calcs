<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>$page_name</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/index.css" />
        <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    </head>
    
    <body>
        <div class="wrapper">
            <header>
                <div class='header_top_row row'>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-chevron-left'></i>
                    </div>
                    <div class='col-xs-20 text-center'>Расчет суточного объема жидкости у детей</div>
                    <div class='col-xs-2 right_icon text-center'>
                        <i class='glyphicon glyphicon-floppy-save'></i>
                    </div>
                </div>
                <div class='header_botttom_row'>
                    <ul>
                        <li class='active'>Рассчет</li>
                        <li>Информация</li>
                    </ul>
                </div>
            </header>
            
            <main>
			
				<script>

					function calculation() {
					var 
						 
					id1 = Number(document.getElementById('id1').value),
					id2 = Number(document.getElementById('id2').value),		
					id3 = Number(document.getElementById('id3').value),
					id4 = Number(document.getElementById('id4').value),		
					id5 = Number(document.getElementById('id5').value),
					id6 = Number(document.getElementById('id6').value),		
					id7 = Number(document.getElementById('id7').value),
					id8 = Number(document.getElementById('id8').value),		
					
					text,
					Ntemp,
					Nbrth,
					g_to_kg = 1,
					gp = 0,
					gvo = 0,
					gtpp = 0,
					res1 = 0,
					res2 = 0,
					result = 0,
					flag = 0,
					
					gp_arr_1 = [140,130,120,110,100],
					
					gp_arr_2 = [0,0,0,0,0,0,0,630,714,793,897,959,1038,1115,1191,1269,1339,1411,1481,1550,1618,1684,1749,1812,1875,1955,1994,2052,2108,2163,2217,2269,2304,2343,2380,2450,2484,2516,2561,2604,2640,2677,2713,2748,2781,2812,2844,2882,2899,2925,2950,2973,2995,3035,3046];			
					
					//ЖП			
					if(id1 < 5){
						if((id2 >= 0)&&(id2 < 7000)){
							gp = gp_arr_1[id1]*(id2/1000);		
						}
						else{
							flag = 1;
						}
					}
					else{
						if((id2 > 6)&&(id2 < 55)){
							gp = gp_arr_2[id2];
						}
						else{
							flag = 2;
						}
					}
					
					if(id1 < 5){
						g_to_kg = 1000;
					}
					else{	
						g_to_kg = 1;
					}
					
					//отеки
					if(id8 == 1){ gp = gp - gp/4; }
					
					//ЖВО
					/*
					Весь кальтулятор работает корректно , но c данным параметром расхождение,
					при выборе Степень эксикоза I II или III степени итоговый результат у кальуклятора с http://medicalc.ru/ всегда больше расчетного
          			на величину gp(жидкости поддержания (ЖП)), что противоречит их же собственным формулам.
					Аналогичных калькуляторов для независимой оценки пока не нашел.
					*/
					if(id3 > 0){
						if(id1 < 5){
							if(id3 == 1){gvo = 50 * (id2/g_to_kg);}
							if(id3 == 2){gvo = 75 * (id2/g_to_kg);}
							if(id3 == 3){gvo = 100 * (id2/g_to_kg);}
						}
						if(id1 == 5){
							if(id3 == 1){gvo = 50 * (id2/g_to_kg);}
							if(id3 == 2){gvo = 60 * (id2/g_to_kg);}
							if(id3 == 3){gvo = 80 * (id2/g_to_kg);}
						}
						if(id1 == 6){
						    if(id3 == 1){gvo = 35 * (id2/g_to_kg);}
							if(id3 == 2){gvo = 60 * (id2/g_to_kg);}
							if(id3 == 3){gvo = 65 * (id2/g_to_kg);}
						}			
					}
						
					//ЖТПП
					//гипертермия
					if(id4 > 37.0){
						Ntemp = Math.floor(id4 - 37);
						if(Ntemp > 5){
							Ntemp = 5;
						}
						gtpp = gtpp + Ntemp * 10 * (id2/g_to_kg);
					}
					
					//Диарея
					if(id5 == 1){ gtpp = gtpp + 10 * (id2/g_to_kg); }
					if(id5 == 2){ gtpp = gtpp + 30 * (id2/g_to_kg); }
				
					//отдышка
					if((id6 > 54)&&(id6 < 155))
					{
						if((id6 >= 55)&&(id6 < 75)){ gtpp = gtpp + 15 * (id2/g_to_kg); }
					    if((id6 >= 75)&&(id6 < 95)){ gtpp = gtpp + 30 * (id2/g_to_kg); }
						if((id6 >= 95)&&(id6 < 115)){ gtpp = gtpp + 45 * (id2/g_to_kg); }
						if((id6 >= 115)&&(id6 < 135)){ gtpp = gtpp + 60 * (id2/g_to_kg); }		
						if(id6 >= 135){ gtpp = gtpp + 75 * (id2/g_to_kg); }		
					}
			
					//Парез кишечника
					if(id7 == 1){ gtpp = gtpp + 20 * (id2/g_to_kg);}
				    if(id7 == 2){ gtpp = gtpp + 40 * (id2/g_to_kg);}
					
					if(id3 == 0){
						res1 = gp + gtpp;
						result = 'Суточная потребность: ' + res1 + ' миллилитров';
						text = '';
					}
					else{
						res1 = (gp + gtpp + (2/3) * gvo).toFixed(2);
						result = 'За первые сутки: ' + res1 + ' миллилитров';
						res2 = (gp + gtpp + (1/3) * gvo).toFixed(2);
						text = 'За вторые сутки: ' + res2 + ' миллилитров';	
					}
					
					if(flag == 1){
							result = 'Доступные значения: от 0 до 6999 граммов';
							text = '';
					}
					if(flag == 2){
							result = 'Доступные значения: от 7 до 54 килограммов';
							text = '';
					}
					
					document.getElementById('result-score').innerHTML = result;
					document.getElementById('result-text').innerHTML  = text;
					}
					
					function reset() {
					document.getElementById('result-score').innerHTML  = 'Результат';
					document.getElementById('result-text').innerHTML  = 'Оценка';
					document.getElementById('id1').value = 0;
					document.getElementById('id2').value = '';
					document.getElementById('id3').value = 0;
					document.getElementById('id4').value = '';
					document.getElementById('id5').value = 0;
					document.getElementById('id6').value = '';
					document.getElementById('id7').value = 0;
					document.getElementById('id8').value = 0;
					
					}
					
				</script>
				
				<div class='select_wrapper'>
				    <label for='select_1'>Возраст</label>
					<select name='select_1' id='id1' >
						<option value='0'>До 1 месяца</option>
						<option value='1'>1 - 2 месяца</option>
						<option value='2'>2 - 3 месяца</option>
						<option value='3'>3 - 4 месяца</option>
						<option value='4'>4 - 6 месяцев</option>
						<option value='5'>6 - 12 месяцев</option>
						<option value='6'>Старше 1 года</option>
					</select>
				</div>
				<div class='input_wrapper'>
                    <label for='id2'>Вес, граммов(0 - 6999г) - дети младше 6 месяцев / Вес, кг(7 - 54кг) - дети старше 6 месяцев</label>
                    <input name="id2" id="id2" min="0" type="number" value="" />
                </div>	
				<div class='select_wrapper'>
				    <label for='select_2'>Степень эксикоза</label>
					<select name='select_2' id='id3' >
						<option value='0'>Нет</option>
						<option value='1'>I степень(легкий)</option>
						<option value='2'>II степень(средний)</option>
						<option value='3'>III степень(тяжелый)</option>
					</select>
				</div>
				<div class='input_wrapper'>
                    <label for='id4'>Температура тела, oC(Гипертермия)</label>
                    <input name="id4" id="id4" min="0" type="number" value="" />
                </div>	
				<div class='select_wrapper'>
					<label for='select_4'>Диарея за 12 часов</label>
					<select name='select_4' id='id5' >
						<option value='0'>Нет</option>
						<option value='1'>Умеренная</option>
						<option value='2'>Профузня</option>
					</select>
				</div>
				<div class='input_wrapper'>
                    <label for='id6'>Частота дыхания, в мин.(Отдышка)</label>
                    <input name="id6" id="id6" min="0" type="number" value="" />
                </div>		
				<div class='select_wrapper'>
					<label for='select_6'>Парез кишечника</label>
					<select name='select_6' id='id7' >
						<option value='0'>Нет или I степень</option>
						<option value='1'>II степень</option>
						<option value='2'>III степень</option>
					</select>
				</div>
				<div class='select_wrapper'>
					<label for='select_7'>Отеки</label>
					<select name='select_7' id='id8' >
						<option value='0'>Нет</option>
						<option value='1'>Да</option>
					</select>
				</div>
            </main>
        </div>
        <footer class='text-center'>
            <div class='result_title' id='result-score'>Результат</div>
            <div class='result' id='result-text'>Оценка</div>
            <div class='row button_row'>
                <div class='col-xs-12 button_wrapper'>
                    <button class='clear_button' onclick='reset()'>Сбросить</button>
                </div>
                <div class='col-xs-12 button_wrapper'>
                    <button class='result_button' onclick='calculation()'>Рассчитать</button>
                </div>
            </div>
        </footer>
    </body>
</html>
